<!DOCTYPE html>
<html lang="fa">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/select2.min.css">
    <link rel="stylesheet" href="css/paymentfont.min.css">
    <link rel="stylesheet" href="css/slider-radio.css">
    <link rel="stylesheet" href="css/plyr.css">
    <link rel="stylesheet" href="css/main.css">

    <!-- Favicons -->
    <link rel="icon" type="image/png" href="icon/favicon-32x32.png" sizes="32x32">
    <link rel="apple-touch-icon" href="icon/favicon-32x32.png">

    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Dmitry Volkov">
    <title>آپلود اپیزود جدید</title>

</head>

<body dir="rtl">
    <!-- header -->
    <header class="header">
        <div class="header__content">
            <div class="header__logo">
                <a href="index.html">
                    <img src="img/logo.svg" alt="">
                </a>
            </div>

            
    </header>
    <!-- end header -->

    <!-- sidebar -->
    <div class="sidebar">
        <!-- sidebar logo -->
        <div class="sidebar__logo">
            <img src="img/logo.svg" alt="">
        </div>
        <!-- end sidebar logo -->

        <!-- sidebar nav -->
        <ul class="sidebar__nav">
            <li class="sidebar__nav-item">
                <a href="index.html" class="sidebar__nav-link sidebar__nav-link--active"><svg
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path
                            d="M20,8h0L14,2.74a3,3,0,0,0-4,0L4,8a3,3,0,0,0-1,2.26V19a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V10.25A3,3,0,0,0,20,8ZM14,20H10V15a1,1,0,0,1,1-1h2a1,1,0,0,1,1,1Zm5-1a1,1,0,0,1-1,1H16V15a3,3,0,0,0-3-3H11a3,3,0,0,0-3,3v5H6a1,1,0,0,1-1-1V10.25a1,1,0,0,1,.34-.75l6-5.25a1,1,0,0,1,1.32,0l6,5.25a1,1,0,0,1,.34.75Z">
                        </path>
                    </svg> <span>صفحه اصلی</span></a>
            </li>

            <li class="sidebar__nav-item">
                <a href="artists.html" class="sidebar__nav-link"><svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24">
                        <path
                            d="M12.3,12.22A4.92,4.92,0,0,0,14,8.5a5,5,0,0,0-10,0,4.92,4.92,0,0,0,1.7,3.72A8,8,0,0,0,1,19.5a1,1,0,0,0,2,0,6,6,0,0,1,12,0,1,1,0,0,0,2,0A8,8,0,0,0,12.3,12.22ZM9,11.5a3,3,0,1,1,3-3A3,3,0,0,1,9,11.5Zm9.74.32A5,5,0,0,0,15,3.5a1,1,0,0,0,0,2,3,3,0,0,1,3,3,3,3,0,0,1-1.5,2.59,1,1,0,0,0-.5.84,1,1,0,0,0,.45.86l.39.26.13.07a7,7,0,0,1,4,6.38,1,1,0,0,0,2,0A9,9,0,0,0,18.74,11.82Z" />
                    </svg> <span>پادکست ها</span></a>
            </li>

            <li class="sidebar__nav-item">
                <a href="releases.html" class="sidebar__nav-link"><svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24">
                        <path
                            d="M21.65,2.24a1,1,0,0,0-.8-.23l-13,2A1,1,0,0,0,7,5V15.35A3.45,3.45,0,0,0,5.5,15,3.5,3.5,0,1,0,9,18.5V10.86L20,9.17v4.18A3.45,3.45,0,0,0,18.5,13,3.5,3.5,0,1,0,22,16.5V3A1,1,0,0,0,21.65,2.24ZM5.5,20A1.5,1.5,0,1,1,7,18.5,1.5,1.5,0,0,1,5.5,20Zm13-2A1.5,1.5,0,1,1,20,16.5,1.5,1.5,0,0,1,18.5,18ZM20,7.14,9,8.83v-3L20,4.17Z" />
                    </svg> <span>منتشر شده ها</span></a>
            </li>

            <li class="sidebar__nav-item">
                <a href="podcasts.html" class="sidebar__nav-link"><svg xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24">
                        <path
                            d="M12,15a4,4,0,0,0,4-4V5A4,4,0,0,0,8,5v6A4,4,0,0,0,12,15ZM10,5a2,2,0,0,1,4,0v6a2,2,0,0,1-4,0Zm10,6a1,1,0,0,0-2,0A6,6,0,0,1,6,11a1,1,0,0,0-2,0,8,8,0,0,0,7,7.93V21H9a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2H13V18.93A8,8,0,0,0,20,11Z" />
                    </svg> <span>پادکست ها</span></a>
            </li>

        </ul>
    </div>


    <!-- main content -->
    <main class="main">
        <div class="container mt-5" style="padding-right: 10px;">
            <h2 style="color: #24a669; justify-content: start; display: flex;">آپلود اپیزود جدید</h2>
            <form id="uploadForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="podcast" style="color: #24a669; justify-content: start; display: flex;">انتخاب پادکست:</label>
                    <select class="form-control" id="podcast" name="podcast" required style="background-color: rgba(68, 68, 68, 0.5); color: white; border: 1px solid #24a66975;">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
                <div class="form-group">
                    <label for="title" style="color: #24a669; justify-content: start; display: flex;">عنوان:</label>
                    <input type="text" class="form-control" id="title" name="title" required style="background-color: rgba(68, 68, 68, 0.5); color: white; border: 1px solid #24a66975;">
                </div>
                <div class="form-group">
                    <label for="description" style="color: #24a669; justify-content: start; display: flex;">توضیحات:</label>
                    <textarea class="form-control" id="description" name="description" rows="3" style="background-color: rgba(68, 68, 68, 0.5); color: white; border: 1px solid #24a66975;"></textarea>
                </div>
                <div class="form-group"></div>
                    <label for="audio_file" style="color: #24a669; justify-content: start; display: flex;">فایل صوتی:</label>
                    <input type="file" class="form-control-file" id="audio_file" name="audio_file" required style="display: none;">
                    <button type="button" class="btn btn-primary" onclick="document.getElementById('audio_file').click();" style="background-color: #24a669; border-radius: 5px; display: flex; justify-content: start; margin-bottom: 20px;">انتخاب فایل</button>
                </div>
                <div class="form-group">
                    <label for="transcript" style="color: #24a669; justify-content: start; display: flex; padding: 10px;">رونوشت:</label>
                    <textarea class="form-control" id="transcript" name="transcript" rows="3" style=" background-color: rgba(68, 68, 68, 0.5); color: white; border: 1px solid #24a66975; width: 93% ; margin-right: 10px;"></textarea>
                </div>
                <div class="form-group">
                    <label for="image" style="color: #24a669; justify-content: start; display: flex; padding: 10px;">تصویر:</label>
                    <input type="file" class="form-control-file" id="image" name="image" style="display: none;">
                    <button type="button" class="btn btn-primary" onclick="document.getElementById('image').click();" style="background-color: #24a669; border-radius: 5px; display: flex; justify-content: start; margin-right: 10px;">انتخاب تصویر</button>
                </div>
                <button type="submit" class="btn" style="background-color: #24a669; width: 95%; margin-top: 20px; color: white; font-weight: bolder; display: flex; justify-content: center; justify-self: center; margin-top: 10px;">آپلود</button>
            </form>
        </div>
    </main>
    <script>
        $(document).ready(function() {
            // Fetch podcasts and populate the select options
            $.ajax({
                url: 'http://api.revisto.lol/api/podcasts/',
                method: 'GET',
                success: function(data) {
                    var podcastSelect = $('#podcast');
                    data.forEach(function(podcast) {
                        podcastSelect.append(new Option(podcast.title, podcast.id));
                    });
                },
                error: function(error) {
                    console.error('Error fetching podcasts:', error);
                }
            });
    
            // Handle form submission
            $('#uploadForm').on('submit', function(event) {
                event.preventDefault();
    
                var formData = new FormData(this);
    
                $.ajax({
                    url: 'http://api.revisto.lol/api/episodes/upload/',
                    method: 'POST',
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                        alert('اپیزود با موفقیت آپلود شد!');
                        $('#uploadForm')[0].reset();
                    },
                    error: function(error) {
                        console.error('Error uploading episode:', error);
                        alert('خطا در آپلود اپیزود. لطفا دوباره تلاش کنید.');
                    }
                });
            });
        });
    </script>

    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/smooth-scrollbar.js"></script>
    <script src="js/select2.min.js"></script>
    <script src="js/slider-radio.js"></script>
    <script src="js/jquery.inputmask.min.js"></script>
    <script src="js/plyr.min.js"></script>
    <script src="js/main.js"></script>
</body>

</html>